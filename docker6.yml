---
- name: creating containers using docker for setting up jenkins and tomcats
  hosts: all 
  tasks:
    - name: create jenkins containers
      docker_container:
        name: myjenkins
        image: jenkins/jenkins
        ports:
          - 5050:8080
    
    - name: create tomcat qaserver and prodserver
      docker_container:
        name: "{{item.a}}"
        image: tomcat
        ports:
          - "{{item.b}}"
        links:
          - myjenkins:jenkins
        with_items:
          - {a: qaerver,b: "6060:8080"}
          - {a: prodserver,b: "7070:8080"}
...

